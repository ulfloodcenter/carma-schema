{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://floodcenter.louisiana.edu/CARMA.schema.20200709.json",
  "title": "CARMA schema",
  "description": "Data schema for Coastal Aquifer Research and Management Analytics (CARMA) Platform",
  "type": "object",
  "required": ["HUC12Watersheds", "Counties"],
  "properties": {
  	"HUC12Watersheds": {
  		"type": "array",
  		"items": { "$ref": "#/definitions/HUC12Watershed" },
  		"minItems": 1,
      	"uniqueItems": true
  	},
	"Counties": {
		"type": "array",
		"items": { "$ref": "#/definitions/County" },
  		"minItems": 1,
      	"uniqueItems": true
	},
  	"GroundWaterAvailabilityDatasets": {
  		"type": "array",
  		"items": { "$ref": "#/definitions/GroundWaterAvailabilityDataset" },
  		"minItems": 1,
  		"uniqueItems": true
  	},
  	"SurfaceWaterAvailabilityDatasets": {
		"type": "array",
		"items": { "$ref": "#/definitions/SurfaceWaterAvailabilityDataset" },
		"minItems": 1,
		"uniqueItems": true
  	},
  	"WaterUseDatasets": {
  		"type": "array",
		"items": { "$ref": "#/definitions/WaterUseDataset" },
		"minItems": 1,
		"uniqueItems": true
  	}
  },
  "definitions": {
  	"HUC12Watershed": {
  		"type": "object",
  		"required": ["id", "description", "geometry", "area", "crops", "developedArea", "maxStreamOrder", "meanAnnualFlow"],
  		"properties": {
  			"id": {
  				"type": "string",
  				"description": "The ID of the HUC-12, e.g.: 111402010000"
  			},
  			"description": {
  				"type": "string",
  				"description": "A description for the HUC-12 watershed"
  			},
  			"area": {
  				"type": "number",
				"minimum": 1,
  				"description": "The total area of the HUC-12 watershed (unit: ha)"
  			},
			"crops": {
				"type": "array",
				"items": { "$ref": "#/definitions/CropArea" },
				"minItems": 1,
				"uniqueItems": true
			},
  			"developedArea": {
				"type": "array",
				"items": { "$ref": "#/definitions/DevelopedArea" },
				"minItems": 1,
				"uniqueItems": true
			},
  			"maxStreamOrder": {
  				"type": "integer",
				"minimum": 1,
  				"description": "The maximum Strahler order of streams in the HUC-12 (unitless)"
  			},
  			"meanAnnualFlow": {
  				"type": "number",
				"minimum": 0,
  				"description": "Mean annual streamflow (unit: mm)"
  			},
			"geometry": {
  				"$ref": "https://geojson.org/schema/Polygon.json"
  			}
		}
  	},
	"CropArea": {
		"type": "object",
		"required": ["year", "cropArea"],
		"properties": {
			"year": {
				"type": "integer",
				"minimum": 1,
				"description": "The year of the county population count."
			},
			"cropArea": {
				"type": "number",
				"minimum": 0,
				"description": "The crop area of a HUC-12 watershed (unit: square kilometers)"
			},
			"cropAreaDetail": {
				"type": "object"
			}
		}
	},
	"DevelopedArea" : {
		"type": "object",
		"required": ["year", "area"],
		"properties": {
			"year": {
				"type": "integer",
				"minimum": 1,
				"description": "The year of the developed area data."
			},
			"area": {
				"type": "number",
				"minimum": 0,
				"description": "The developed area of the HUC-12 watershed (unit: square kilometers)"
			}
		}
	},
	"County": {
		"type": "object",
		"required": ["id", "state", "county", "area", "population", "geometry"],
		"properties": {
			"id": {
  				"type": "string",
  				"description": "The ID of the county, in the format of state FIPS code following by county FIPS code, e.g. 22055"
  			},
			"state": {
				"type": "string",
				"description": "The full name of the state that county is in, e.g. 'Louisiana'."
			},
			"county": {
				"type": "string",
				"description": "The name of the county (not including the word 'County'), e.g. 'Lafayette'."
			},
			"area": {
  				"type": "number",
				"minimum": 1,
  				"description": "The total area of the county (unit: square kilometers)"
  			},
			"population": {
				"type": "array",
				"items": { "$ref": "#/definitions/CountyPopulation" },
				"minItems": 1,
				"uniqueItems": true
			},
			"geometry": {
  				"$ref": "https://geojson.org/schema/MultiPolygon.json"
  			}
		}
	},
	"CountyPopulation": {
		"type": "object",
		"required": ["year", "count"],
		"properties": {
			"year": {
				"type": "integer",
				"minimum": 1,
				"description": "The year of the county population count."
			},
			"count": {
				"type": "integer",
				"minimum": 0,
				"description": "The count, or estimated count, of people living in the county."
			}
		}
	},
  	"GroundWaterAvailabilityDataset": {
  		"type": "object",
  		"required": ["huc12", "description", "sourceData", "year", "value", "unit"],
  		"properties": {
  			"huc12": {
  				"type": "string",
  				"description": "The ID of the HUC-12 watershed that this dataset is associated with"
  			},
  			"description": {
  				"type": "string",
  				"description": "A description of the ground water dataset"
  			},
  			"sourceData": {
  				"type": "string",
  				"description": "A URI referring to the original source of the dataset"
  			},
  			"year": {
  				"type": "integer",
				"minimum": 1,
  				"description": "The year that the value of the dataset represents"
  			},
  			"value": {
  				"type": "number",
				"minimum": 0,
  				"description": "The data value that the dataset represents"
  			},
  			"unit": {
  				"$ref": "#/definitions/Unit"
  			}
  		}
  	},
  	"SurfaceWaterAvailabilityDataset": {
  		"type": "object",
  		"required": ["huc12", "description", "sourceData", "year", "value", "unit"],
  		"properties": {
  			"huc12": {
  				"type": "string",
  				"description": "The ID of the HUC-12 watershed that this dataset is associated with"
  			},
  			"description": {
  				"type": "string",
  				"description": "A description of the ground water dataset"
  			},
  			"sourceData": {
  				"type": "string",
  				"description": "A URI referring to the original source of the dataset"
  			},
  			"year": {
  				"type": "integer",
				"minimum": 1,
  				"description": "The year that the value of the dataset represents"
  			},
  			"value": {
  				"type": "number",
				"minimum": 0,
  				"description": "The data value that the dataset represents"
  			},
  			"unit": {
				"$ref": "#/definitions/Unit"
			}
  		}
  	},
  	"WaterUseDataset": {
  		"type": "object",
  		"required": ["huc12", "useType", "sector", "description", "sourceData", "year", "value", "unit"],
  		"properties": {
  			"huc12": {
  				"type": "string",
  				"description": "The ID of the HUC-12 watershed that this dataset is associated with"
  			},
  			"useType": {
				"$ref": "#/definitions/UseType"	  
			},
  			"sector": {
				"$ref": "#/definitions/Sector"	  
			},
			"description": {
				"type": "string",
				"description": "A description of the water use dataset"
			},
  			"sourceData": {
  				"type": "string",
  				"description": "A URI referring to the original source of the dataset"
  			},
  			"year": {
  				"type": "integer",
				"minimum": 1,
  				"description": "The year that the value of the dataset represents"
  			},
  			"value": {
  				"type": "number",
				"minimum": 0,
  				"description": "The data value that the dataset represents"
  			},
  			"unit": {
				"$ref": "#/definitions/Unit"
			}
  		}
  	},
  	"Unit": {
  		"type": "object",
  		"required": ["name"],
  		"properties": {
  			"name": {
  				"type": "string",
  				"description": "The abbreviation of the unit."
  			},
  			"description": {
  				"type": "string",
  				"description": "A more detailed description of the unit."
  			},
  			"primaryDimension": {
				"$ref": "#/definitions/Dimension"
  			},
  			"secondaryDimension": {
				"$ref": "#/definitions/Dimension"
  			},
  			"tertiaryDimension": {
				"$ref": "#/definitions/Dimension"
  			}
  		}
  	},
  	"Dimension": {
  		"type": "object",
  		"required": ["name"],
  		"properties": {
  			"name": {
  				"type": "string",
  				"enum": ["Millimeter", "Meter", "Cubic meter", "Hectare", "Liter", "Million liter", "Kilogram", "Kelvin", "Second", "Minute", "Hour", "Day", "Year"]
  			}
  		}
  	},
  	"UseType": {
  		"type": "object",
  		"required": ["name"],
  		"properties": {
  			"name": {
  				"type": "string",
  				"enum": ["Surface Water", "Ground Water"]
  			}
  		}
  	},
  	"Sector": {
  		"type": "object",
  		"required": ["name"],
  		"properties": {
  			"name": {
  				"type": "string",
  				"enum": ["Public Supply", "Domestic", "Commercial", "Industrial", "Total Thermoelectric Power", "Fossil-fuel Thermoelectric Power", "Geothermal Thermoelectric Power", "Nuclear Thermoelectric Power", "Thermoelectric Power (Once-through cooling)", "Thermoelectric Power (Closed-loop cooling)", "Mining", "Livestock", "Livestock (Stock)", "Livestock (Animal Specialities)", "Aquaculture", "Irrigation, Total", "Irrigation, Crop", "Irrigation, Golf Courses", "Hydroelectric Power", "Wastewater Treatment"]
  			}
  		}
  	}
  }
}
